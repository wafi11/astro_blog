---
import Content3 from "../components/Content3";
import Layouts from "../layouts/Layouts.astro";
import { getEverithing, getTopHeadlines, postCategory } from "./actions/post.astro";
const country = Astro.url.searchParams.get('category') || 'entertainment';
import BannerTrending from '../components/BannerTrending'
import type { Data, Propsing,DataAstro } from "../components/types";
import SliderImage from '../components/sliderImages'
const data = await getTopHeadlines(country)
const datas : DataAstro = await getEverithing(country)
const filteredArticles = datas.articles.filter((item) => {
    return item.author && item.content && item.description && item.publishedAt && item.title && item.url && item.urlToImage;
  })
---

<Layouts title='Trendings Blog'>
    <BannerTrending data={data} client:load/>
        <section class="grid grid-cols-6 gap-6 container py-10 bg-gray-100 rounded-b-2xl">
            <div class="col-span-3 font-bebas gap-5 flex flex-col">
                <h1 class=" font-bold text-5xl py-5 flex ">Top Blogs
                    <span class="h-3 w-3 bg-black rounded-full bottom-0"></span>
                </h1>
                <img src={datas.articles[0].urlToImage} alt="/" class="rounded-2xl h-[250px] w-full object-cover">
                <p class="text-md text-gray-400">{new Date(filteredArticles[0].publishedAt).toLocaleDateString()}</p>
                <h1 class="text-xl font-semibold  font-blog">{filteredArticles[0].title}</h1>
                <p class="text-md font-semibold  font-blog text-gray-400">{filteredArticles[0].description}</p>
                <div class="flex gap-4 items-center pt-5">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 bg-gray-900 rounded-full">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 14a4 4 0 0 1-4-4 4 4 0 1 1 8 0 4 4 0 0 1-4 4zm0 2c4.4 0 8 1.79 8 4v2H4v-2c0-2.21 3.6-4 8-4z"></path>
                    </svg>
                    
                    <p class="text-md font-semibold grid font-bebas tracking-wider text-gray-900">
                        <span>Written By : </span>
                        {filteredArticles[0].author}
                    </p>
                </div>
            </div>
            <div class="col-span-3 font-blog pt-7 ">
                <div class="grid  gap-4 pt-[80px]">
                    {
                        filteredArticles.slice(1,3).map((item) => (
                            <div class="grid grid-cols-2 gap-3">
                            <img src={item.urlToImage} alt="/" class="h-full w-full object-cover rounded-2xl" />
                            <div class="flex flex-col gap-3">
                            <p class='text-sm text-gray-600 font-bebas pt-2'>{new Date(item.publishedAt).toLocaleDateString()}</p>
                            <h1 class="text-xl  font-bebas">{item.title}</h1>
                            <h1 class="text-md  font-blog text-gray-500">{item.description}</h1>
                            </div>
                            </div>
                        ))
                    }
                </div>
            </div>
        </section>
        <section class="pt-[50px] font-bebas container">
            <Content3 data={datas} title="Blogs Content"/>
        </section>
        <SliderImage data={datas} client:load/>
</Layouts>




