import{j as e}from"./jsx-runtime.dvAB8w6V.js";import{r as d}from"./index.B3PfHquH.js";import{r as b,s as h,u as x,g as f,a as p}from"./_astro_actions.Ch1ENNOh.js";const w=({id:i,initialData:o})=>{const[t,u]=d.useState({author:"",image:null,category:"",title:"",description:""});d.useEffect(()=>{o&&u(n=>({...n,author:o.author,image:o.image,category:o.category,title:o.title,description:o.description}))},[o,i]),console.log(t);const l=n=>{const{name:c,value:r,files:a}=n.target;u(c==="image"?s=>({...s,image:a[0]}):s=>({...s,[c]:r}))},g=async n=>{n.preventDefault();let c="";if(t.image){const a=b(h,`images/${t.image.name}`);await x(a,t.image),c=await f(a)}const r=new FormData;r.append("author",t.author),r.append("image",c),r.append("category",t.category),r.append("title",t.title),r.append("description",t.description);try{let a;i?(r.append("id",i),a=await p.updateBlog.safe(r)):a=await p.blog.safe(r);const{data:s,error:m}=a;s&&alert(s),m&&console.log(m.message)}catch(a){console.error("Error creating blog:",a)}};return e.jsx("div",{className:"flex justify-center items-center h-screen pt-[70px]",children:e.jsxs("form",{onSubmit:g,className:"bg-white p-8 rounded shadow-md w-full max-w-lg",children:[e.jsx("h2",{className:"text-2xl mb-6",children:i?"Update Blog":"Create Blog"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"author",className:"block text-gray-700 mb-2",children:"Author:"}),e.jsx("input",{type:"text",id:"author",name:"author",value:t.author,onChange:l,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-gray-700 mb-2",children:"Image:"}),e.jsx("input",{type:"file",id:"image",name:"image",onChange:l,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 mb-2",children:"Category:"}),e.jsx("input",{type:"text",id:"category",name:"category",value:t.category,onChange:l,required:!0,placeholder:"Separate categories with commas",className:"w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 mb-2",children:"Title:"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:l,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:"Description:"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:l,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500"})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none focus:bg-blue-600",children:"Create Blog"})]})})};export{w as default};
